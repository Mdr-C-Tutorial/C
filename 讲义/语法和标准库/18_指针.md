# 指针

## 1. 定义

1. 指针是一种对象类型，它引用函数或另一种类型的对象
2. 指针可以不引用任何内容，此时他是一个“空指针”

## 2. 声明

1. 指针声明符的格式：`* 声明符`（一个星加上另一个声明符）
   > 注：函数声明符：`声明符(形参列表)`
   > 注：数组声明符：`声明符[（多种情况）]`
   > // 当上述两行的声明符是指针声明符时，得加括号
2. 其中”声明符“可以是标识符，也可以是其他的声明符（包括指针声明符）
3. 如果指针声明符是其他声明符的“声明符”部分，那么声明一个“指向’其他声明符声明的类型‘的指针”

   ```c
   int **p;
   // '**p' 是 指针声明符，声明一个指向int的指针
   // 他的”声明符“部分为”*p“，是个指针声明符，声明一个指向”指向int的指针“的指针
   ```

## todo 后面乱七八糟的以后改（不是我写的（

## 1. 内存

内存在经过虚拟之后，看起来像一条带有格子的长纸带，内存地址是每一个格子的编号

## 1. 指针与指针变量

指针是C语言中的一种数据类型

指针变量是一个变量，这个变量的大小恒定，由系统决定（现在大部分的64位操作系统,一个指针的大小都为8个字节），它存储着一个**内存地址**

在不造成混淆的前提下，一般把指针变量简称指针

## 2. 指针的定义

1. 定义和初始化方式：`type *var_name=address;`
2. 指针必须在定义时赋值 否则会出现问题
    1. 全局变量和静态变量会指向null
    2. 有生命周期的变量：如函数中的变量会会指向一个随机值

## 3. 指针的取值

1. 解引用运算符

    ```c
    int a=10;
    int *point=&a;
    printf("address:a=%a",&a);//这里是变量a的地址
    printf("point=%X",point);//这里是指针point指向的地址 应该和a的地址相同
    printf("a=%d",a);//这是a的取值
    printf("value of point=%d",*point);//这是指针point指向地址的取值 应该等于a
    ```

   含义为指针指向地址的取值


8.指针的运算

指向数组的指针可以借助*（）进行赋值

```c
int a[]={1,2,3,4,5};
int *point = a;
*(point+1)=1;//现在数组为{1,1,3,4,5}
```

*(point+1)的含义是指针point指向数组的下一个元素 而不简单是下一个字节

同样我们可以可把它运用在多维数组中

```c
int a[2][3]={0};
int *point=a;
*(*(point+1)+2)=2;//此时数组为{{0，0，0}{0，0，2}}
```

9.数组指针和指针数组

数组指针是一个指针它指向数组，指针数组是一个数组 它的元素是指针

数组指针定义方法

```c
type *var_name[]=addresses;
```

10.二级指针

二级指针即为 **指向指针的指针**

```c
int a=10;
int *pointOne=&a;
int **pointTwe=&pointOne;
```

11.常量指针&指针常量&常量指针常量

（1）常量指针：指向常量的指针（无法通过指针修改它指向的常量）

（2）指针常量：被设置为常量的指针（无法修改指针指向的内容）

（3）常量指针常量：被设置为常量且指向常量的指针（既无法通过指针修改它指向的常量也无法修改指针指向的内容）

12.数组名作为函数的参数

```c
void arrayImport(type name[])
{
    .....
}
```

13.字符串指针

数组的本质是一片连续的内存空间，数组名实际是第一个元素的地址，我们还知道字符数组（字符串）以“\0”作为结尾，因为这个原因所以会出现"\0截断"这个问题，同理我们也可以用指针定义一个字符串，它会自动加结尾追加上"\0"

```c
char *name="mdr yyds";
```

14.字符串指针作为形参

这里和上方的普通数组几乎相同，唯一要注意的是字符指针定义的字符串不可以直接作为形参传入，因为它在内存布局中属于内存分布中的常量区，这里的数据编译之后无法更改，但你可以用malloc的方法申请内存空间。

15.字符指针数组

```c
char *arrey[2]={"mdr","yyds"};
```

16.主函数参数

我们现在找一个标准的main函数

```c
int main(int argc,char *argv[]) {

    return 0;
}
```

我们发现它有argc和args这两个参数 这两个参数是交给用户的可输入参数 其中argc是输入参数的个数 args是可输入参数的内容 以空格为分界线，我们可以用这个功能做出一些功能强大的命令行工具如

```c
//main.c
#include<stdio.h>

int main(int argc, char *argv[]) {
    printf("本次输入参数共有%d个\n",argc);
    int i;
    for (i=0; i<argc; i++) {
        printf("第%d个参数是：%s\n", i, argv[i]);
    }
    return 0;
}
```

//编译为main.exe后运行

```shell
main.exe mdr yyds
```

//输出
本次输入参数共有2个
第1个参数是:mdr
第2个参数是:yyds

17.函数指针

一个指向函数的指针，通过指针来调用函数

```c
#include<stdio.h>

int fc(int b) {
    return b;
}

int main(int argc, char *argv[]){  
    int b=0;
    int (*point)(int)=&fc; //int:返回值;point：指针名;(int):参数
    printf("%d",(*point)(b));
    return 0;
}
```

18.指针作为函数的参数

```c
type fc(type *)
{
    .....
}
```

19.指针作为返回参数即指针函数

```c
type *fc()
{
.....
return type *name;//这里的返回值必须是一个指针
}
```
