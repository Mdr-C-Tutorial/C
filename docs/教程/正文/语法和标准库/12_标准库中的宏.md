# 标准库中的宏

在 C 语言编程中，**宏**（preprocessor macros）是确保代码**可移植性**、**安全性**和**可维护性**的核心工具之一。标准库通过一系列头文件定义了大量预定义宏，这些宏提供平台无关的常量、类型别名、数值极限以及格式化说明符，帮助程序员避免硬编码假设，从而让代码在不同架构、编译器和操作系统上行为一致。

本教程将重点介绍 C 标准库中几组关键宏：

- **`<stddef.h>`**：基础宏，如 ` NULL `、` offsetof `，以及类型 ` size_t `、`ptrdiff_t`（常以宏形式间接使用）。
- **`<stdint.h>`**：固定宽度整数类型（如 ` int32_t `）及其极限宏（如 ` INT32_MAX `、` UINT64_MAX `）。
- **`<inttypes.h>`**：格式化宏（如 ` PRId32 `、` PRIu64 `、` SCNxPTR `），用于`printf`/`scanf`家族的安全跨平台 I/O。
- **`<limits.h>`**：基本整数类型的数值极限（如 ` INT_MIN `、` INT_MAX `、` CHAR_BIT `、` LLONG_MAX `）。
- **`<float.h>`**：浮点类型的特性与极限（如 ` FLT_MAX `、` DBL_EPSILON `、` FLT_DIG `）。
- **特征测试宏**：预定义宏如 ` __STDC_VERSION__ `、` __STDC_HOSTED__ `，用于条件编译以适配不同 C 标准版本（C99、C11、C17、C23）和实现特性。

这些宏大多是**常量表达式**，可在预处理阶段、`#if` 指令或静态断言中使用。掌握它们，不仅能写出更健壮的代码，还能深入理解 C 语言的底层实现差异。

接下来，我们将逐一详解每个头文件中的宏、其定义目的、使用场景及示例，帮助你从基础到进阶全面运用这些强大工具。
