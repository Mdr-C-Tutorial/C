# 表达式

表达式 (Expression) 是 C 语言中“计算”的基本单位。表达式可以：

1. 计算出一个结果值（例如 `3 + 2`）；
2. 产生副作用 (Side effect)（例如 `i++` 修改对象 `i`）。

表达式永远和以下概念绑定：

1. **类型** (Type)：表达式求值后得到的结果是什么类型；
2. **求值规则**：表达式的操作数如何转换、如何组合、何时产生副作用；
3. **求值顺序**：哪些子表达式之间有确定的先后关系，哪些是未指定的。

## 1. 表达式语句与可观察行为

下面程序能通过编译，但运行时没有任何输出：

```c
int main(void) {
    3 + 2;
    return 0;
}
```

运行结果：该代码块主要用于语法或结构说明，单独运行通常无终端输出。


原因是：`3 + 2;` 是一个**表达式语句** (Expression statement)。它会被求值，但它的结果值没有被使用，也没有产生可观察副作用。

如果你希望观察到结果，需要把结果用于 I/O：

```c
#include <stdio.h>

int main(void) {
    printf("%d\n", 3 + 2);
    return 0;
}
```

可能的输出（示例）：

<TerminalWindow>

<输出与输入或平台相关，请以实际运行为准>

</TerminalWindow>


关于 `printf` 的格式化输出细节会在后续“输入输出”章节中系统介绍。

## 2. 本章目录

1. [4.1 运算符](/教程/正文/语法和标准库/4_表达式/4_1_运算符)
2. [4.2 常量和字面量](/教程/正文/语法和标准库/4_表达式/4_2_常量和字面量)
3. [4.3 求值](/教程/正文/语法和标准库/4_表达式/4_3_求值)
4. [4.4 泛型选择](/教程/正文/语法和标准库/4_表达式/4_4_泛型选择)

## 3. 习题

<Exercise id="10401" :d="2" :w="2">

写一个程序，分别计算并输出以下表达式的结果：

1. `3 + 2 * 5`
2. `(3 + 2) * 5`

要求：解释为什么这两个结果不同（从“运算符优先级与括号”角度回答）。

</Exercise>

<Exercise id="10402" :d="3" :w="2">

判断下列表达式是否会产生副作用，并说明副作用是什么：

1. `a + b`
2. `i++`
3. `a = b + 1`
4. `f(a, b)`（假设 `f` 是一个普通函数）

</Exercise>

<Exercise id="10403" :d="5" :w="3">

写一个函数 `int add(int a, int b)`，在 `main` 中调用并打印返回值。

要求：不要在表达式里写“对同一对象既读又改且缺少确定顺序”的代码（例如 `i = i++`）。

</Exercise>

<Exercise id="10404" :d="6" :w="3">

阅读并判断：以下代码是否具有未定义行为 (Undefined Behavior, UB)？若有，请指出原因并写出一个等价且无 UB 的版本。

```c
int i = 0;
int x = i++ + ++i;
```

运行结果：该代码块主要用于语法或结构说明，单独运行通常无终端输出。


</Exercise>
