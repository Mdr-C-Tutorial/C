# 环境访问

程序运行时会与宿主环境交换信息，例如命令行参数、环境表项和外部命令执行能力。标准库在 `<stdlib.h>` 中提供了最小且可移植的访问接口。

## 1. 环境表项读取：`getenv`

`getenv` 通过键名读取环境表中的字符串值。返回指针可能为 `NULL`，也可能指向由实现管理的存储，因此调用方不应修改其内容。

```c
#include <stdlib.h>
#include <stdio.h>

int main(void) {
    const char *home = getenv("HOME");
    if (home != NULL) {
        printf("HOME=%s\n", home);
    }
    return 0;
}
```

## 2. 命令行参数

宿主实现中，`main` 常见原型为 `int main(int argc, char *argv[])`。`argc` 表示参数个数，`argv` 保存参数字符串数组，`argv[0]` 通常是程序名。读取参数时应先检查下标边界，再做解析。

```c
#include <stdio.h>

int main(int argc, char *argv[]) {
    for (int i = 0; i < argc; ++i) {
        printf("argv[%d] = %s\n", i, argv[i]);
    }
    return 0;
}
```

## 3. 外部命令执行：`system`

`system` 会把命令字符串交给宿主命令处理器执行。它适合教学示例和简单脚本桥接，但在安全敏感场景应谨慎使用，尤其是命令字符串来自不可信输入时。

```c
#include <stdlib.h>

int main(void) {
    return system("echo hello");
}
```

## 4. 边界与建议

环境访问属于“宿主能力”，并非所有目标平台都完整支持。写跨平台代码时，建议把这类能力封装在适配层，不要让业务逻辑直接依赖命令处理器语义。
