# 作用域

作用域 (Scope) 描述“一个标识符在源代码中可见的区域”。它是静态语义规则，与对象是否已经创建是两个概念。理解作用域可以直接避免命名冲突、阴影覆盖和接口泄露。

## 1. 四种常见作用域

文件作用域从声明点持续到翻译单元结尾；块作用域从声明点持续到当前复合语句结束；函数原型作用域只在函数声明的形参列表内有效；标号作用域覆盖整个函数体。它们共同决定了同名标识符何时表示“同一个实体”，何时表示“不同实体”。

## 2. 块作用域与阴影覆盖

```c
#include <stdio.h>

int main(void) {
    int x = 1;

    {
        int x = 2;
        printf("inner x = %d\n", x);
    }

    printf("outer x = %d\n", x);
    return 0;
}
```

内层块重新声明了同名标识符，外层名字在该块中被遮蔽。程序合法，但可读性会下降。除非刻意表达“局部覆盖”，否则建议避免这种写法。

## 3. 文件作用域与接口边界

文件作用域标识符若配合 `static`，只在当前翻译单元可见；不加 `static` 则可能形成外部链接。前者适合模块内部实现细节，后者适合跨文件接口。把这条边界划清，可以显著降低耦合。
