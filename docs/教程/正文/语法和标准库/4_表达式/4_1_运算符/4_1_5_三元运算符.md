# 三元运算符 `? :`

C 语言提供了一个非常独特且实用的运算符，称为**条件运算符 (Conditional Operator)**。因为它需要三个操作数，所以它更为人所知的名字是**三元运算符 (Ternary Operator)**。它是 C 语言中**唯一**一个三元运算符，可以被看作是 `if-else` 语句的简洁、内联形式。

## 语法结构

三元运算符的语法结构如下：

```c
condition ? value_if_true : value_if_false
```

它的工作流程非常直观：

1. 首先，对 `condition` 表达式进行求值。
2. 如果 `condition` 的结果为**真**（即非零值），则整个三元运算符表达式的值就是 `value_if_true` 的值，并且 `value_if_false` 不会被求值。
3. 如果 `condition` 的结果为**假**（即 `0`），则整个三元运算符表达式的值就是 `value_if_false` 的值，并且 `value_if_true` 不会被求值。

## 示例

### 示例 1：求两个数的最大值

这是三元运算符最经典的应用场景之一。

**使用 `if-else` 语句：**

```c
int a = 10;
int b = 20;
int max;

if (a > b) {
    max = a;
} else {
    max = b;
}
// 此时 max 的值为 20
```

**使用三元运算符：**

```c
int a = 10;
int b = 20;

// 如果 a > b 为真，表达式的值为 a；否则，值为 b。
// 然后将这个值赋给 max。
int max = (a > b) ? a : b;

// 此时 max 的值为 20
```

可以看到，使用三元运算符将四行代码缩减为一行，代码更加紧凑。

### 示例 2：根据条件赋值

三元运算符非常适合根据某个条件从两个值中选择一个来进行赋值。

```c
int score = 59;

// 如果 score >= 60 为真，result 指向 "及格"；否则，指向 "不及格"。
char* result = (score >= 60) ? "及格" : "不及格";

printf("考试结果: %s\n", result); // 输出: 考试结果: 不及格
```

::: tip note

#### 三元运算符 vs. `if-else` 语句

虽然三元运算符可以看作是 `if-else` 的简写，但它们之间有一个关键区别：

* **三元运算符是一个表达式 (Expression)**：它总会**产生一个值**，可以被直接赋值给变量、用作函数参数或用在更大的表达式中。
* **`if-else` 是一个语句 (Statement)**：它用于**选择性地执行语句**，不直接产生值。它的分支中可以包含多行代码、复杂的逻辑或没有返回值的函数调用。

当你的目标是“根据条件在两个**值**之间进行选择”时，三元运算符是最佳选择。当你的目标是“根据条件执行不同的操作”时，应该使用 `if-else`。
:::

::: warning 谨慎嵌套 (Use Nesting with Caution)

三元运算符可以嵌套使用，但这样做会**严重降低代码的可读性**。除非逻辑非常简单，否则强烈建议避免嵌套。

**不推荐的嵌套示例（求三个数的最大值）：**

```c
int a = 10, b = 30, c = 20;
int max = (a > b) ? ((a > c) ? a : c) : ((b > c) ? b : c);
```

**更清晰的 `if-else` 版本：**

```c
int a = 10, b = 30, c = 20;
int max;
if (a > b) {
    if (a > c) {
        max = a;
    } else {
        max = c;
    }
} else {
    if (b > c) {
        max = b;
    } else {
        max = c;
    }
}
```

对于这类稍复杂的逻辑，清晰的 `if-else` 结构远比复杂的嵌套三元运算符要好。
